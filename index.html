<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Shopping cart</title>
		<link rel="stylesheet" type="text/css" href="css/main.css">
	</head>
	<body>
		<h1>shopping cart</h1>

		<div>
			<ul>
				<li><a class="add-to-cart" href="#" data-name="Apple" data-price="1.22">Apple 1.22</a></li>
				<li><a class="add-to-cart" href="#" data-name="Banana" data-price="2.30">Banana 2.30</a></li>
				<li><a class="add-to-cart" href="#" data-name="Mango" data-price="3.60">Mango 3.60</a></li>
				<li><a class="add-to-cart" href="#" data-name="Peach" data-price="2.10">Peach 2.10</a></li>
			</ul>

			<button id="clear-cart">Clear Cart</button>
		</div>

		<div>
			<ul id="show-cart">
				<!-- -->
			</ul>

			<div>Total Cart: $<span id="total-cart"></span></div>
		</div>






		<!-- ******Jquery GOOGLE CDN***** -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<script src="js/main.js"></script>
		<script>

			$('.add-to-cart').click(function(event) {
				event.preventDefault()
				var name = $(this).attr('data-name')
				var price = Number($(this).attr('data-price'))

				addItemToCart(name, price, 1)
				displayCart()
			})

			$('#clear-cart').click(function(event) {
				clearCart()
				displayCart()
			})

			function displayCart() {
				var cartArray = listCart()
				var output = ''
				for (var i in cartArray) {
					output += '<li>'+cartArray[i].name+' '+cartArray[i].count+'</li>'
				}
				$('#show-cart').html(output)
				$('#total-cart').html( totalCart() )
			}


			//********************************************************
			// SHOPPING CART 
			var shelf = []
			var cart = []

			
			var shoppingItem = function(name, price, count) {
				this.name = name,
				this.price = price,
				this.count = count
			}

			//addToShelf()
			function addToShelf(name, price, count) {
				var item = new shoppingItem(name, price, count)
				shelf.push(item)
			}
			addToShelf('HouseBlend 1lb', 18, 1)
			addToShelf('HouseBlend 0.5lb', 18, 1)
			addToShelf('KenyaAA 1lb', 18, 1)
			addToShelf('KenyaAA 0.5lb', 18, 1)
			addToShelf('Espresso 1lb', 18, 1)
			addToShelf('Espresso 0.5lb', 18, 1)


			//ListingShelf()

				// to be visable on the UI


			//addItemToCart()
			function addItemToCart(name, price, count) {
				for (var i in cart) {
					if (cart[i].name === name) {
						cart[i].count += count 
						saveCart()
						return
					}
				}
				var item = new shoppingItem(name, price, count)
				cart.push(item)
				saveCart()
			}



			//removeITemFromCart(name) // just one item
			function removeItemFromCart(name) {
				for (var i in cart) {
					if (cart[i].name === name) {
						cart[i].count --
						if (cart[i].count === 0 ) {
							cart.splice(i, 1)
						}
						break
					}
				}
				saveCart()
			}


			//removeItem FromCartAll(name) //remove all item 
			function removeItemFromCartAll(name) {
				for (var i in cart) {
					if (cart[i].name === name) {
						cart.splice(i, 1)
						break
					}

				}
				saveCart()
			}

			
			//clearCart()
			function clearCart() {
				cart = []
				saveCart()
			}


			//countCart() -> return total count
			function countCart() {
				var totalCount = 0
				for (var i in cart){
					totalCount += cart[i].count
				}
				return totalCount
			}


			//totalCart() -> return total cost
			function totalCart() {
				var totalCost = 0

				for (var i in cart) {
					totalCost += cart[i].price * cart[i].count
				}
				return totalCost
			}

			//listCart()  -> array of Items
			function listCart() {
				var cartCopy = []
				for (var i in cart) {
					var item = cart[i]
					var itemCopy = {}
					for (var p in item) {
						itemCopy[p] = item[p]
					}
					cartCopy.push(itemCopy)
				}
				return cartCopy
			}

			//saveCart() -> to check it later -> using local storage 
			function saveCart() {
				localStorage.setItem('shoppingCart', JSON.stringify(cart))
			}


			//loadCart() -> after saving
			function loadCart() {
				cart = JSON.parse(localStorage.getItem('shoppingCart'))
			}

			loadCart()

			displayCart()

			var array = listCart()
			console.log(array)








		</script>
	</body>
</html>